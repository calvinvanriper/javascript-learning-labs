const footballTeam = {
  team: 'Pittsburgh Steelers',
  year: 1978,
  headCoach: 'Chuck Noll',
  players: [
    {
      name: 'Mel Blount',
      position: 'RCB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '47',
      years: '8',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Terry Bradshaw',
      position: 'QB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '12',
      years: '8',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Joe Greene',
      position: 'LDT',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '75',
      years: '9',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'L.C. Greenwood',
      position: 'LDE',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '68',
      years: '9',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Jack Ham',
      position: 'LLB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '59',
      years: '7',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Franco Harris',
      position: 'FB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '32',
      years: '6',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Jack Lambert',
      position: 'MLB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '58',
      years: '4',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Donnie Shell',
      position: 'SS',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '31',
      years: '4',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Lynn Swann',
      position: 'WR',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '88',
      years: '4',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'Mike Webster',
      position: 'C',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '52',
      years: '4',
      isStarter: true,
      proBowl: true,
    },
    {
      name: 'John Banaszak',
      position: 'RDT-RDE-LDE',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '76',
      years: '3',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Rocky Bleier',
      position: 'RB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '20',
      years: '10',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Sam Davis',
      position: 'LOG',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '57',
      years: '11',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Randy Grossman',
      position: 'TE',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '84',
      years: '4',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Ron Johnson',
      position: 'LCB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '29',
      years: 'Rookie',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Jon Kolb',
      position: 'LOT',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '55',
      years: '9',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Gerry Mullins',
      position: 'ROG',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '72',
      years: '7',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Ray Pinney',
      position: 'ROT',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '74',
      years: '2',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'John Stallworth',
      position: 'WR',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '82',
      years: '4',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Loren Toews',
      position: 'RLB-LLB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '51',
      years: '5',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Mike Wagner',
      position: 'FS',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '23',
      years: '7',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Dwight White',
      position: 'RDE',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '78',
      years: '7',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Fred Anderson',
      position: 'DE-DT',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '69',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Larry Anderson',
      position: 'RCB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '30',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Tom Beasley',
      position: 'RDT-LDE',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '65',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Theo Bell',
      position: 'WR',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '83',
      years: '2',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Larry Brown',
      position: 'ROT',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '79',
      years: '7',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Robin Cole',
      position: 'RLB-LLB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '56',
      years: '1',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Craig Colquitt',
      position: 'P',
      tags: ['special-teams', 'special'],
      jerseyNumber: '5',
      years: 'Rookie',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Steve Courson',
      position: 'ROG',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '77',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Bennie Cunningham',
      position: 'TE',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '89',
      years: '2',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Jack Deloplaine',
      position: 'RB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '35',
      years: '2',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Tony Dungy',
      position: 'FS',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '21',
      years: '1',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Gary Dunn',
      position: 'RDT',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '67',
      years: '2',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Steve Furness',
      position: 'RDT',
      tags: ['defense', 'defense-line'],
      jerseyNumber: '64',
      years: '6',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Wentford Gaines',
      position: 'CB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '36',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Roy Gerela',
      position: 'K',
      tags: ['special-teams', 'special'],
      jerseyNumber: '10',
      years: '9',
      isStarter: true,
      proBowl: false,
    },
    {
      name: 'Mike Kruczek',
      position: 'QB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '15',
      years: '2',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Jim Mandich',
      position: 'TE',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '87',
      years: '8',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Alvin Maxson',
      position: 'RB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '28',
      years: '4',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Rick Moser',
      position: 'RB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '39',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Ray Oldham',
      position: 'S',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '25',
      years: '5',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Ted Petersen',
      position: 'C-OT',
      tags: ['offense', 'offense-line'],
      jerseyNumber: '66',
      years: '1',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Randy Reutershan',
      position: 'WR',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '40',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Jim Smith',
      position: 'WR',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '86',
      years: '1',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Nat Terry',
      position: 'CB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '41',
      years: 'Rookie',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Sidney Thornton',
      position: 'RB',
      tags: ['offense', 'offense-backs'],
      jerseyNumber: '38',
      years: '1',
      isStarter: false,
      proBowl: false,
    },
    {
      name: 'Dirt Winston',
      position: 'LB',
      tags: ['defense', 'defense-backs'],
      jerseyNumber: '53',
      years: '1',
      isStarter: false,
      proBowl: false,
    },
  ],
};

const headCoachEl = document.getElementById('head-coach');
const teamEl = document.getElementById('team');
const yearEl = document.getElementById('year');
const playerCardsEl = document.getElementById('player-cards');
const positionSelect = document.getElementById('players');

headCoachEl.textContent = footballTeam.headCoach;
teamEl.textContent = footballTeam.team;
yearEl.textContent = String(footballTeam.year);

/**
 * Renders player cards into the DOM based on the provided list.
 * @param {Array<{
 *   name: string,
 *   position: string,
 *   years: string,
 *   jerseyNumber: string,
 *   isStarter: boolean,
 *   proBowl: boolean
 * }>} players - Players to render.
 */
function renderPlayers(players) {
  playerCardsEl.innerHTML = players
    .map(({ name, position, years, jerseyNumber, isStarter, proBowl }) => {
      const cardClasses = ['player-card', isStarter ? 'starter' : '', proBowl ? 'probowl' : '']
        .filter(Boolean)
        .join(' ');

      const starterText = isStarter ? 'Starter' : '';
      const proBowlHtml = proBowl ? '<span class="probowl-text">ProBowl Selected</span>' : '';

      const statusHtml =
        starterText || proBowlHtml
          ? `<p>${[starterText, proBowlHtml].filter(Boolean).join(' / ')}</p>`
          : '';

      return `
        <div class="${cardClasses}">
          <div class="jersey-number">${jerseyNumber}</div>

          <div class="player-info">
            <h2>${name}</h2>
            <p class="player-meta">
              <span>Position: ${position}</span>
              <span>|</span>
              <span>Years: ${years}</span>
            </p>
            ${statusHtml}
          </div>
        </div>
      `;
    })
    .join('');
}

/**
 * Returns players filtered by the selected category/tag.
 * @param {string} selected - Selected filter value from the dropdown.
 * @returns {Array<Object>} Filtered list of players.
 */
function getFilteredPlayers(selected) {
  if (selected === 'all') return footballTeam.players;

  if (selected === 'starter') {
    return footballTeam.players.filter((p) => p.isStarter);
  }

  if (selected === 'probowl') {
    return footballTeam.players.filter((p) => p.proBowl);
  }

  return footballTeam.players.filter((p) => p.tags?.includes(selected));
}

/**
 * Handles the dropdown change event by filtering players and re-rendering cards.
 * @returns {void}
 */
function handlePositionChange() {
  const selected = positionSelect.value;
  const filtered = getFilteredPlayers(selected);
  renderPlayers(filtered);
}

positionSelect.addEventListener('change', handlePositionChange);
renderPlayers(footballTeam.players);

// ---- Test calls (manual validation) ----
// 1) On load: team/year/head coach should populate and all players render.
// 2) Select "starter": only starters should display.
// 3) Select "probowl": only ProBowl-selected should display.
// 4) Select "defense-line": only defense-line tagged players should display.
// 5) Return to "all": all players should display again.
